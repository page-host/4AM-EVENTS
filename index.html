<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="theme-color" content="#FF136F" />
    
    <title>4AM Events - Academic & Community Calendar</title>
    <meta name="description" content="Stay organized with 4AM Events. High-performance, responsive academic calendar for students.">
    <link rel="icon" href="assets/cal.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: { sans: ['Poppins', 'sans-serif'] },
            colors: {
              brand: {
                pink: '#FF136F',
                orange: '#FF9C35',
                purple: '#3F07F8',
                light: '#FEEAE9',
              }
            }
          }
        }
      }
    </script>
    <style>
      body { transition: background-color 0.3s ease; min-height: 100vh; overflow-x: hidden; }
      body:not(.dark) { background: linear-gradient(135deg, #EEF2FF 0%, #F3E8FF 50%, #FFF1F2 100%); }
      body.dark { background: linear-gradient(135deg, #0f172a 0%, #111827 50%, #1e1b4b 100%); }
      
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .custom-scrollbar::-webkit-scrollbar { width: 4px; }
      .custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(156, 163, 175, 0.5); border-radius: 20px; }
      
      * { -webkit-tap-highlight-color: transparent; outline: none; }

      /* PERFECT EQUAL GRID BOXES */
      .calendar-grid-cell {
        aspect-ratio: 1 / 1;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: stretch;
        overflow: hidden;
        border-right-width: 1px;
        border-bottom-width: 1px;
        min-width: 0;
      }

      .bg-gradient-today { background: linear-gradient(135deg, #ff00cc, #333399); }
      .modal-anim { animation: modalScale 0.2s cubic-bezier(0.16, 1, 0.3, 1); }
      @keyframes modalScale { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }

      .course-card { transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
      .course-card:active { transform: scale(0.95); }
      
      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 1rem;
      }
    </style>
  </head>
  <body class="antialiased font-sans">
    <main id="root" class="min-h-screen p-2 md:p-8 max-w-7xl mx-auto selection:bg-brand-pink selection:text-white pb-20">
      <div class="flex flex-col items-center justify-center min-h-[50vh] text-brand-purple">
        <i data-lucide="loader-2" class="w-10 h-10 animate-spin mb-4"></i>
        <p class="animate-pulse font-medium text-lg text-center">Configuring your academic workspace...</p>
      </div>
    </main>

    <script>
      const REPO_OWNER = "page-host";
      const REPO_NAME = "4AM-EVENTS";
      const FILE_PATH = "events.json";
      const COURSES_PATH = "4"; 
      const APP_URL = window.location.href.split('?')[0].split('#')[0].replace(/\/$/, "");

      const state = {
        currentDate: new Date(2025, 11, 1),
        selectedDateKey: null,
        events: {},
        courses: [],
        selectedCourse: null,
        courseImages: [],
        isLoadingCourses: false,
        isLoadingGallery: false,
        adminToken: localStorage.getItem('4am_admin_token'),
        isDarkMode: localStorage.getItem('4am_dark_mode') === 'true',
        isReminderModalOpen: false, 
        reminderValue: parseInt(localStorage.getItem('4am_reminder_val')) || 1,
        reminderUnit: localStorage.getItem('4am_reminder_unit') || 'days' 
      };

      if (state.isDarkMode) document.documentElement.classList.add('dark');

      const formatDateKey = (year, month, day) => `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      const getDaysInMonth = (year, month) => new Date(year, month + 1, 0).getDate();
      const getFirstDayOfMonth = (year, month) => new Date(year, month, 1).getDay();
      const getMonthName = (monthIndex) => new Date(0, monthIndex).toLocaleString('default', { month: 'long' });

      // Fix SW Registration Origin Error
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          const swPath = './sw.js';
          // Check if origin matches to prevent registration errors in certain sandbox environments
          const isSameOrigin = window.location.origin.includes('goog') || window.location.origin.includes('vercel') || window.location.origin.includes('github');
          if (isSameOrigin) {
            navigator.serviceWorker.register(swPath, { scope: './' })
              .then(reg => console.log('SW Registered:', reg.scope))
              .catch(err => console.warn('SW registration skipped:', err.message));
          }
        });
      }

      async function fetchEvents() {
        try {
          const res = await fetch(`${FILE_PATH}?t=${Date.now()}`);
          if (res.ok) state.events = await res.json();
        } catch (e) {
          console.warn("Using local events.");
        } finally {
          render();
          fetchCourses();
          const urlParams = new URLSearchParams(window.location.search);
          if (urlParams.has('openDate')) actions.navigateToDate(urlParams.get('openDate'));
          if (localStorage.getItem('4am_reminder_setup')) startReminderCheck();
        }
      }

      async function fetchCourses() {
        state.isLoadingCourses = true;
        render();
        try {
          const res = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${COURSES_PATH}`);
          if (res.ok) {
            const data = await res.json();
            // Subfolders in the "4" directory represent course codes
            state.courses = data.filter(item => item.type === 'dir').map(item => item.name);
          }
        } catch (e) {
          console.error("Error fetching course codes:", e);
        } finally {
          state.isLoadingCourses = false;
          render();
        }
      }

      async function fetchCourseImages(courseName) {
        state.selectedCourse = courseName;
        state.isLoadingGallery = true;
        state.courseImages = [];
        render();
        try {
          const res = await fetch(`https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${COURSES_PATH}/${encodeURIComponent(courseName)}`);
          if (res.ok) {
            const data = await res.json();
            const imageExts = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg'];
            state.courseImages = data
              .filter(item => item.type === 'file' && imageExts.includes(item.name.split('.').pop().toLowerCase()))
              .map(item => item.download_url);
          }
        } catch (e) {
          console.error("Error fetching course materials:", e);
        } finally {
          state.isLoadingGallery = false;
          render();
        }
      }

      function startReminderCheck() {
        checkUpcomingReminders();
        setInterval(checkUpcomingReminders, 120000); 
      }

      function checkUpcomingReminders() {
        if (!('Notification' in window) || Notification.permission !== 'granted') return;
        const now = new Date();
        const notifiedEvents = JSON.parse(localStorage.getItem('4am_notified_events') || '{}');
        const bufferMs = state.reminderUnit === 'days' ? state.reminderValue * 86400000 : state.reminderValue * 3600000;

        Object.keys(state.events).forEach(dateKey => {
          const [y, m, d] = dateKey.split('-').map(Number);
          const eventDate = new Date(y, m - 1, d);
          const diff = eventDate.getTime() - now.getTime();
          const isToday = now.getFullYear() === y && now.getMonth() === (m-1) && now.getDate() === d;
          
          if (isToday || (diff > 0 && diff <= bufferMs)) {
            state.events[dateKey].forEach((evt, idx) => {
              const notificationKey = `v3_${dateKey}_${idx}_${evt.title}`;
              if (!notifiedEvents[notificationKey]) {
                triggerNotification(evt.title, dateKey, isToday ? 'TODAY' : 'UPCOMING');
                notifiedEvents[notificationKey] = true;
              }
            });
          }
        });
        localStorage.setItem('4am_notified_events', JSON.stringify(notifiedEvents));
      }

      function triggerNotification(title, body, type) {
        const options = {
          body: type === 'TODAY' ? `Scheduled for today: ${title}` : `${title} on ${body}`,
          icon: 'assets/cal.png',
          badge: 'assets/cal.png',
          vibrate: [200, 100, 200],
          data: { url: APP_URL, dateKey: body }
        };
        if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
          navigator.serviceWorker.ready.then(reg => reg.showNotification('4AM Events Alert', options));
        } else {
          new Notification('4AM Events Alert', options);
        }
      }

      const actions = {
        toggleDarkMode: () => {
          state.isDarkMode = !state.isDarkMode;
          localStorage.setItem('4am_dark_mode', state.isDarkMode);
          document.documentElement.classList.toggle('dark');
          render();
        },
        prevMonth: () => { state.currentDate = new Date(state.currentDate.getFullYear(), state.currentDate.getMonth() - 1, 1); render(); },
        nextMonth: () => { state.currentDate = new Date(state.currentDate.getFullYear(), state.currentDate.getMonth() + 1, 1); render(); },
        today: () => { state.currentDate = new Date(); render(); },
        navigateToDate: (dateKey) => {
          const d = new Date(dateKey);
          if (isNaN(d.getTime())) return;
          state.currentDate = new Date(d.getFullYear(), d.getMonth(), 1);
          state.selectedDateKey = dateKey;
          render();
        },
        selectDate: (dateKey) => { 
          state.selectedDateKey = dateKey; 
          try { window.history.pushState({ dateKey }, '', APP_URL + "?openDate=" + dateKey); } catch (e) {}
          render(); 
        },
        closeModal: () => { 
          state.selectedDateKey = null; 
          try { window.history.pushState({}, '', APP_URL); } catch (e) {}
          render(); 
        },
        closeGallery: () => { state.selectedCourse = null; state.courseImages = []; render(); },
        openReminderModal: () => { state.isReminderModalOpen = true; render(); },
        closeReminderModal: () => { state.isReminderModalOpen = false; render(); },
        setReminderValue: (v) => { state.reminderValue = parseInt(v) || 1; localStorage.setItem('4am_reminder_val', state.reminderValue); },
        setReminderUnit: (u) => { state.reminderUnit = u; localStorage.setItem('4am_reminder_unit', u); },
        confirmReminder: async () => {
          if (!('Notification' in window)) return alert("Browser does not support notifications.");
          const perm = await Notification.requestPermission();
          if (perm === 'granted') {
            localStorage.setItem('4am_reminder_setup', 'true');
            startReminderCheck();
            state.isReminderModalOpen = false;
          } else {
            alert("Notification access denied.");
          }
          render();
        }
      };

      function Icon(name, size=20, extraClass='') {
        return `<i data-lucide="${name}" width="${size}" height="${size}" class="${extraClass}"></i>`;
      }

      function renderHeader() {
        const year = state.currentDate.getFullYear();
        const monthName = getMonthName(state.currentDate.getMonth());
        return `
          <header class="flex flex-col md:flex-row justify-between items-center mb-6 bg-white dark:bg-gray-800 p-4 rounded-3xl shadow-lg border border-white dark:border-gray-700 gap-4 w-full">
            <div class="flex items-center gap-3 w-full md:w-auto">
              <div class="w-12 h-12 shrink-0 bg-gradient-to-br from-brand-pink to-brand-orange rounded-2xl flex items-center justify-center shadow-lg text-white">${Icon('calendar', 24)}</div>
              <div>
                <h1 class="text-xl md:text-2xl font-extrabold text-gray-900 dark:text-gray-100 leading-none">4AM Events</h1>
                <p class="text-[9px] text-brand-purple dark:text-brand-pink font-bold uppercase tracking-widest mt-1">Academic Suite</p>
              </div>
            </div>
            <div class="flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto">
              <div class="flex items-center bg-gray-50 dark:bg-gray-700/50 p-1 rounded-xl w-full sm:w-auto justify-between border border-gray-100 dark:border-gray-600">
                <button onclick="actions.prevMonth()" class="p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-400">${Icon('chevron-left', 20)}</button>
                <div class="px-4 text-center font-bold text-gray-800 dark:text-gray-200 text-sm sm:text-base">${monthName} <span class="text-brand-purple dark:text-brand-orange">${year}</span></div>
                <button onclick="actions.nextMonth()" class="p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-400">${Icon('chevron-right', 20)}</button>
              </div>
              <div class="flex gap-2 w-full sm:w-auto">
                <button onclick="actions.toggleDarkMode()" class="px-3 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-800 dark:text-gray-200 rounded-xl hover:shadow-sm">${Icon(state.isDarkMode ? 'sun' : 'moon', 20)}</button>
                <button onclick="actions.openReminderModal()" class="px-3 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-brand-purple dark:text-brand-orange rounded-xl hover:shadow-sm">${Icon('bell', 20)}</button>
                <button onclick="actions.today()" class="px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-800 dark:text-gray-200 text-sm font-bold rounded-xl flex-1 sm:flex-none">Today</button>
              </div>
            </div>
          </header>
        `;
      }

      function renderCalendar() {
        const year = state.currentDate.getFullYear();
        const month = state.currentDate.getMonth();
        const daysInMonth = getDaysInMonth(year, month);
        const startDay = getFirstDayOfMonth(year, month);
        const todayStr = formatDateKey(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
        
        let html = '';
        const emptyCell = `<div class="calendar-grid-cell bg-gray-50/50 dark:bg-gray-900/30 border-gray-100 dark:border-gray-700"></div>`;
        for(let i=0; i<startDay; i++) html += emptyCell;
        
        for(let day=1; day<=daysInMonth; day++) {
          const dateKey = formatDateKey(year, month, day);
          const dayEvents = state.events[dateKey] || [];
          const isToday = dateKey === todayStr;
          const numClass = isToday ? 'bg-gradient-today text-white shadow-lg scale-110 z-10' : 'text-gray-700 dark:text-gray-300';
          const dots = dayEvents.length > 0 ? `<div class="mt-auto pb-1 flex justify-center gap-0.5">${dayEvents.map(() => `<span class="h-1 w-1 rounded-full bg-brand-pink"></span>`).join('')}</div>` : '';
          
          html += `
            <div onclick="actions.selectDate('${dateKey}')" class="calendar-grid-cell relative p-1 cursor-pointer bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors" role="button">
              <div class="flex justify-between items-start"><span class="flex items-center justify-center w-7 h-7 sm:w-8 sm:h-8 rounded-full text-xs font-bold ${numClass}">${day}</span></div>
              <div class="hidden sm:block overflow-hidden mt-1">${dayEvents.slice(0, 1).map((evt) => `<div class="text-[8px] truncate px-1 py-0.5 rounded bg-brand-pink/10 text-brand-pink font-bold">${evt.title}</div>`).join('')}</div>
              ${dots}
            </div>
          `;
        }
        
        const padding = (startDay + daysInMonth) % 7 === 0 ? 0 : 7 - ((startDay + daysInMonth) % 7);
        for(let i=0; i<padding; i++) html += emptyCell;
        
        return `
          <div class="lg:col-span-3">
            <section class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl border border-white dark:border-gray-700 overflow-hidden">
              <div class="grid grid-cols-7 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50">
                ${['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].map(d => `<div class="py-3 text-center text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">${d}</div>`).join('')}
              </div>
              <div class="grid grid-cols-7 bg-gray-100 dark:bg-gray-900">${html}</div>
            </section>
          </div>
        `;
      }

      function renderSidebar() {
        const upcoming = Object.keys(state.events).sort()
          .filter(d => {
             const [y, m, day] = d.split('-').map(Number);
             return new Date(y, m-1, day) >= new Date().setHours(0,0,0,0);
          }).slice(0, 6)
          .map(date => {
            const evts = state.events[date];
            const dateStr = new Date(date).toLocaleDateString(undefined, { weekday: 'short', month: 'short', day: 'numeric' });
            return `<div onclick="actions.selectDate('${date}')" class="cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 p-3 rounded-xl transition-colors border-b dark:border-gray-700 last:border-0">
              <div class="text-[10px] font-bold text-brand-purple dark:text-brand-orange mb-1 uppercase tracking-wider">${dateStr}</div>
              ${evts.map(e => `<div class="text-sm font-bold text-gray-800 dark:text-gray-100 line-clamp-1">${e.title}</div>`).join('')}
            </div>`;
          }).join('');
        return `<aside class="lg:col-span-1"><div class="bg-white dark:bg-gray-800 rounded-3xl shadow-lg border border-white dark:border-gray-700 p-6 h-full flex flex-col"><div class="flex items-center gap-3 mb-4 border-b pb-4 dark:border-gray-700"><div class="p-2 bg-orange-50 dark:bg-orange-900/30 text-brand-orange rounded-xl">${Icon('clock', 18)}</div><h2 class="text-lg font-extrabold text-gray-800 dark:text-gray-200 tracking-tight">Timeline</h2></div><div class="space-y-1 overflow-y-auto custom-scrollbar flex-1">${upcoming || '<p class="text-xs text-gray-400 text-center py-4">No events found.</p>'}</div></div></aside>`;
      }

      function renderCourses() {
        if (state.isLoadingCourses) return `<div class="mt-8 flex justify-center py-10">${Icon('loader-2', 32, 'animate-spin text-brand-pink')}</div>`;
        const courseItems = state.courses.map(course => `
          <button onclick="fetchCourseImages('${course}')" class="course-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col items-center gap-2 group hover:shadow-md">
            <div class="w-12 h-12 bg-brand-pink/5 group-hover:bg-brand-pink/10 text-brand-pink rounded-xl flex items-center justify-center transition-colors">${Icon('folder', 24)}</div>
            <span class="text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-tight text-center line-clamp-2">${course}</span>
          </button>
        `).join('');

        return `
          <section class="mt-12">
            <div class="flex items-center gap-3 mb-6">
              <div class="p-2 bg-brand-pink/10 text-brand-pink rounded-xl">${Icon('book-open', 24)}</div>
              <h2 class="text-2xl font-extrabold text-gray-900 dark:text-white tracking-tight">Course Materials</h2>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4">
              ${courseItems || `<p class="col-span-full text-center text-gray-400 py-10 text-sm">No course folders found in repository folder "${COURSES_PATH}".</p>`}
            </div>
          </section>
        `;
      }

      function renderGalleryModal() {
        if (!state.selectedCourse) return '';
        const images = state.courseImages.map(url => `
          <div class="bg-white dark:bg-gray-700 rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all">
            <img src="${url}" loading="lazy" class="w-full aspect-[3/4] object-cover cursor-zoom-in" onclick="window.open('${url}', '_blank')">
          </div>
        `).join('');

        return `
          <div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-md p-4">
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col max-h-[90vh] modal-anim">
              <div class="p-5 flex justify-between items-center border-b dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50">
                <div class="flex items-center gap-3">
                  <div class="p-2 bg-brand-pink text-white rounded-xl shadow-md">${Icon('image', 20)}</div>
                  <h3 class="text-xl font-extrabold text-gray-900 dark:text-white uppercase tracking-tight">${state.selectedCourse}</h3>
                </div>
                <button onclick="actions.closeGallery()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-gray-500 transition-colors">${Icon('x', 24)}</button>
              </div>
              <div class="p-6 overflow-y-auto flex-1 bg-gray-50 dark:bg-gray-900/50">
                ${state.isLoadingGallery ? `<div class="flex flex-col items-center justify-center py-24 text-brand-pink gap-4">${Icon('loader-2', 48, 'animate-spin')}<span class="text-sm font-bold animate-pulse">Syncing Library...</span></div>` : `
                  <div class="gallery-grid">
                    ${images || `<div class="col-span-full text-center py-20 text-gray-400 font-medium italic">No material assets found for this course code.</div>`}
                  </div>
                `}
              </div>
            </div>
          </div>
        `;
      }

      function renderDateModal() {
        if (!state.selectedDateKey) return '';
        const dayEvents = state.events[state.selectedDateKey] || [];
        const dateStr = new Date(state.selectedDateKey).toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        return `<div class="fixed inset-0 z-[90] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"><div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[85vh] modal-anim"><div class="bg-gradient-to-r from-brand-pink to-brand-orange p-5 flex justify-between items-center text-white shrink-0"><div><h3 class="text-lg font-extrabold tracking-tight">Daily Agenda</h3><p class="text-[10px] opacity-90 font-medium">${dateStr}</p></div><button onclick="actions.closeModal()" class="p-2 hover:bg-white/20 rounded-full transition-colors">${Icon('x', 24)}</button></div><div class="p-6 overflow-y-auto flex-1 bg-gray-50 dark:bg-gray-900/50">${dayEvents.length === 0 ? `<div class="text-center py-10 text-gray-400 font-medium">Your schedule is currently clear.</div>` : `<div class="space-y-4">${dayEvents.map(evt => `<article class="bg-white dark:bg-gray-800 border-l-4 border-brand-purple p-4 rounded-r-xl shadow-sm border dark:border-gray-700"><h4 class="font-bold text-gray-900 dark:text-white mb-1 leading-tight">${evt.title}</h4><p class="text-gray-600 dark:text-gray-300 text-xs whitespace-pre-wrap leading-relaxed">${evt.description}</p></article>`).join('')}</div>`}</div></div></div>`;
      }

      function renderReminderModal() {
        if (!state.isReminderModalOpen) return '';
        return `
          <div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-md p-4">
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-sm p-6 text-center modal-anim relative">
               <button onclick="actions.closeReminderModal()" class="absolute top-3 right-3 p-2 text-gray-400 hover:bg-gray-100 rounded-full transition-colors">${Icon('x', 20)}</button>
               <div class="w-16 h-16 bg-brand-pink/10 text-brand-pink rounded-full flex items-center justify-center mx-auto mb-4">${Icon('bell-ring', 32)}</div>
               <h3 class="text-xl font-extrabold text-gray-900 dark:text-white mb-2 tracking-tight">Enable Mobile Alerts</h3>
               <p class="text-gray-500 text-xs mb-6">Stay ahead of assignments with automatic reminders.</p>
               <div class="flex items-center gap-2 mb-8 justify-center">
                 <input type="number" min="1" value="${state.reminderValue}" oninput="actions.setReminderValue(this.value)" class="w-16 px-2 py-2 bg-gray-50 dark:bg-gray-700 rounded-lg text-center font-bold text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 outline-none focus:ring-2 focus:ring-brand-pink">
                 <select onchange="actions.setReminderUnit(this.value)" class="px-2 py-2 bg-gray-50 dark:bg-gray-700 rounded-lg text-sm font-bold text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 outline-none">
                   <option value="days" ${state.reminderUnit === 'days' ? 'selected' : ''}>Days</option>
                   <option value="hours" ${state.reminderUnit === 'hours' ? 'selected' : ''}>Hours</option>
                 </select>
               </div>
               <button onclick="actions.confirmReminder()" class="w-full py-4 bg-brand-purple text-white font-bold rounded-xl shadow-lg active:scale-95 transition-all">Grant Alerts</button>
            </div>
          </div>
        `;
      }

      function render() {
        const root = document.getElementById('root');
        root.innerHTML = `
          ${renderHeader()}
          <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 lg:gap-8">
            ${renderCalendar()}
            ${renderSidebar()}
          </div>
          ${renderCourses()}
          ${renderDateModal()}
          ${renderReminderModal()}
          ${renderGalleryModal()}
        `;
        lucide.createIcons();
      }

      fetchEvents();
    </script>
  </body>
</html>
